{% extends 'base.html' %} 
{% load static %} 
{% load i18n %}
{% block title %}Chat con {{ friend_name }} - {{ block.super }}{% endblock %} 

{% block content %}
<div class="chat-container">
  <div class="chat-header">
    <a href="{% url 'home' %}" class="back-link">
      <span class="material-icons-outlined icon">arrow_back</span>
      {% trans "Volver" %}
    </a>
    <div class="user-info">
      <img src="{{ friend_avatar }}" alt="Avatar" class="user-avatar" />
      <div class="user-details">
        <strong>{{ friend_name }}</strong>
        <span class="user-status">{% trans "Activo hace 10mins" %}</span>
      </div>
    </div>
  </div>
  <div class="chat-messages">
    <div class="message-cluster">
      <img src="{{ friend_avatar }}" alt="Avatar" class="message-avatar" />
      <div class="messages">
        <div class="message received"> Â¡Holaaa! ðŸ˜„</div>
        <div class="message received">
          Â¿CÃ³mo vas con lo de las pantallas? Â¿Todo bien?
        </div>
      </div>
    </div>
   
    <div class="message sent">Â¡Hola {{ friend_first_name }}! Todo bien, avanzando.</div>
    <div class="message sent">Justo ahora estoy ajustando los Ãºltimos detalles del diseÃ±o.</div>
    
    <div class="message-cluster">
      <img src="{{ friend_avatar }}" alt="Avatar" class="message-avatar" />
      <div class="messages">
        <div class="message received">Ufff quÃ© bueno, me tenÃ­as con el alma en un hilo ðŸ˜‚</div>
        <div class="message received">
          Hoy sÃ­ tenemos que mandarlo sÃ­ o sÃ­, no hay prÃ³rroga esta vez.
        </div>
      </div>
    </div>

    <div class="message sent"> En unos minutos te lo mando para revisiÃ³n ðŸ˜Š</div>
  </div>
  <form class="chat-input-form">
    <input type="text" placeholder="{% trans "Mensaje" %}" class="chat-input" autocomplete="off" />
  </form>
</div>

<style>
.chat-container {
  display: flex;
  flex-direction: column;
  height: 80vh;
  width:75%;
}
.chat-header {
  border-bottom: 1px solid var(--grey-100);
  display: flex;
  flex-direction: column;
  gap: 15px;
}
.chat-container .user-info {
  display: flex;
  align-items: center;
  gap: 10px;
}
.message-cluster {
  display: flex;
  gap: 10px;
}

.messages {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.user-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}
.user-details strong {
  display: flex;
  flex-direction: column;
  font-weight: 700;
  font-size: 18px;
  color: var(--grey-800);
}
.user-status {
  font-size: 14px;
  color: var(--grey-400);
  text-decoration: underline;
}
.chat-messages {
  flex-grow: 1;
  padding: 15px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}
.message {
  max-width: 70%;
  padding: 10px 15px;
  border-radius: 20px;
  font-size: 14px;
  line-height: 1.4;
  word-wrap: break-word;
}
.message.received {
  background-color: var(--green-100);
  align-self: flex-start;
  display: flex;
  align-items: flex-start;
  gap: 8px;
}
.message.sent {
  background-color: var(--green-600);
  color: white;
  align-self: flex-end;
}
.message-avatar {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  object-fit: cover;
  margin-top: 4px;
}
.chat-input-form {
  padding: 10px 15px;
}
.chat-input {
  width: 100%;
  padding: 10px 15px;
  border-radius: 20px;
  border: 1px solid var(--green-600);
  color: var(--green-600);
  outline: none;
  font-size: 14px;
  box-sizing: border-box;
  background-color: var(--green-100);
}

@media (max-width: 992px) {
  .chat-container {
    width: 100%;
    height:100%;
  }
  footer {
    display:none;
  }
  .mobile-navbar {
    display: none;
  }
  .chat-messages {
    max-height: 65vh;
  }
}
</style>
{% endblock %}
